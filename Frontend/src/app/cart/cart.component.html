<div class="top-margin">
  <div class="cart" *ngIf="cart.length > 0; else emptyCart">
    <div *ngFor="let item of cart" class="cart-item">
      <div class="item-image">
        <img [src]="item.image" alt="{{ item.name }}">
      </div>
      <div class="item-details">
        <h2>{{ item.name }}</h2>
        <p>Price: {{ item.price | number:'1.2-2' }} $</p>
        <p>Quantity: {{ item.quantity }} buc</p>
        <p>Total: {{ item.price * (item.quantity || 0) | number:'1.2-2' }} $</p>
        <button (click)="increaseCount(item)">+</button>
        <button (click)="decreaseCount(item)">-</button>
        <button (click)="removeItemFromCart(item.id)">Remove</button>
      </div>
    </div>
    <div class="cart-summary">
      <p>Total Items: {{ totalCount() }} buc</p>
      <p>Total Price: {{ totalCart() | number:'1.2-2' }} $</p>
      <button (click)="clearCart()">Clear Cart</button>
      <button (click)="navigateToPay()">Proceed to Payment</button>
    </div>
  </div>

  <ng-template #emptyCart>
    <div class="empty-cart">
      <img class="full-page-image" src="https://cdn3.iconfinder.com/data/icons/shopping-and-ecommerce-29/90/empty_cart-512.png">
      <h1>Your cart is empty</h1>
      <button class="empty-button" (click)="navigateToProducts()">Go to Products</button>
    </div>
  </ng-template>
</div>

<div *ngIf="showSuccessPopup" class="popup-container">
  <div class="popup">
    <div class="popup-content">
      <p>{{ successMessage }}</p>
      <div class="form-buttons center-button">
        <button class="btn btn-primary" (click)="closeSuccessPopup()">OK</button>
      </div>
    </div>
  </div>
</div>